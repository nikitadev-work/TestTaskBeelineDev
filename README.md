# XML to JSON Converter Microservice

## Основные функции
- **Аутентификация**: Использование Bearer Token для защиты API.
- **Конвертация**: Преобразование XML данных о пользователях в формат JSON.
- **Группировка возрастов**: Классификация пользователей по возрастным категориям:
    - до 25 лет
    - от 25 до 35 лет
    - старше 35 лет
- **Асинхронная обработка**: Обработка запросов в фоновом режиме для повышения производительности.
- **Отправка результатов**: Автоматическая отправка конвертированных данных на внешний сервис.

---

## Технологии
- **Язык**: Go
- **HTTP сервер**: `net/http`
- **Конфигурация**: Управление через переменные окружения
- **Логирование**: Запись логов в файл `provider.log`

---

## Запуск
1. Установите переменные окружения:
   ```bash
   PORT=8080
   AUTH_KEY=your_secret_key
   OUTPUT_SERVICE_URL=http://localhost:8081/users
   LOG_FILE=provider.log
   NUM_OF_WORKERS=100
   TIMEOUT=5s
   SHUTDOWN_TIMEOUT=10s

2. Соберите и запустите

## API Endpoints
### POST /convert_xml
- **Заголовки**:
    - `Content-Type`: `application/xml`
    - `Authorization`: `Bearer <your_token>`

- **Тело запроса**:
```xml
<users>
    <user id="1">
        <name>Иван Иванов</name>
        <email>ivan@example.com</email>
        <age>30</age>
    </user>
    <user id="2">
        <name>Мария Петрова</name>
        <email>maria@example.com</email>
        <age>25</age>
    </user>
</users>
```

## Тестирование
Запуск тестов:
```bash

go test ./...
```

## Планы по улучшению

### Основной функционал
- [ ] Реализовать ограничение запросов (rate limiting)
- [ ] Пакетная обработка больших файлов

### Производительность
- [ ] Пулы воркеров для горутин
- [ ] Кеширование частых запросов

### Мониторинг
- [ ] Введение метрик (Grafana + Prometheus)
- [ ] Health-check эндпоинт

### Развертывание
- [ ] Docker образ

### Тестирование
- [ ] Полное покрытие всего функционала микросервиса unit тестами
- [ ] Интеграционные тесты с mock-сервером

### Документация
- [ ] Swagger/OpenAPI спецификация